name: Esteira de Verificação do Projeto

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  validar:
    runs-on: ubuntu-latest

    steps:
      # 1️⃣ Checkout do código
      - name: Checkout do repositório
        uses: actions/checkout@v4

      # 2️⃣ Verificar se a pasta src existe
      - name: Verificar pasta src
        run: |
          if [ ! -d "src" ]; then
            echo "Erro: Pasta src não encontrada!"
            exit 1
          fi

      # 3️⃣ Verificar se o CSS está no caminho correto
      - name: Verificar arquivo CSS
        run: |
          if [ ! -f "src/css/style.css" ]; then
            echo "Erro: Arquivo src/css/style.css não encontrado!"
            exit 1
          fi

      # 4️⃣ Verificar se existe tag <footer>
      - name: Verificar presença da tag footer
        run: |
          if ! grep -q "<footer>" src/index.html; then
            echo "Erro: O HTML deve conter uma tag <footer> com o nome do aluno."
            exit 1
          fi

      # 5️⃣ Linting profissional com HTMLHint
      - name: Validar HTML com HTMLHint
        uses: cyb3r-jak3/htmlhint-action@v2
        with:
          target_pattern: "src/index.html"

      # 6️⃣ Relatório final de auditoria
      - name: Relatório de Auditoria
        run: echo "O código do aluno [Daniel M] foi auditado, está seguindo as normas corretas e está pronto para o deploy!"